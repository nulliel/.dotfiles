#!/usr/bin/env bash

u_header "sync"

if [[ ! $NO_SYNC || ! $INSTALL_DEFAULTS ]]; then
    seek_confirmation "Sync dotfiles?"
fi

if [[ $INSTALL_DEFAULTS ]]; then
    set_confirmed
fi

u_print "Syncing dotfiles..."

if is_confirmed; then
    git pull --rebase origin master >/dev/null 2>&1 || {
        u_fail
        exit 1
    }

    git submodule update --recursive --init --quiet
    u_pass
else
    u_skip
fi

u_exit_header
